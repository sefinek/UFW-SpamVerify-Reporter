# 🛡️ UFW SpamVerify Reporter
An integration tool designed to analyze UFW logs and report IP addresses blocked by the firewall to the [SpamVerify](https://spamverify.com) database.  
To prevent excessive reporting of the same IP address within a short time period, the tool uses a temporary cache file to track previously reported IP addresses.

⭐ If you like this repository or find it useful, I'd greatly appreciate it if you could give it a star. Many thanks!  
Also, check this out: [sefinek/Cloudflare-WAF-To-AbuseIPDB](https://github.com/sefinek/Cloudflare-WAF-To-AbuseIPDB)

> [!IMPORTANT]
> - If you'd like to make changes to any files in this repository, please start by creating a [public fork](https://github.com/sefinek/UFW-SpamVerify-Reporter/fork).
> - UDP traffic should not be reported!


## 📋 Requirements
- [Node.js + npm](https://gist.github.com/sefinek/fb50041a5f456321d58104bbf3f6e649)
- [PM2](https://www.npmjs.com/package/pm2) (`npm i -g pm2`)
- [Git](https://gist.github.com/sefinek/1de50073ffbbae82fc901506304f0ada)
- Linux (Ubuntu or Debian)


## ✅ Features
1. **Easy Configuration** – The [`config.js`](config.default.js) file allows for quick and simple configuration.
2. **Simple Installer** – Enables fast and seamless integration deployment.
3. **Bulk Reporting Support** – If the script encounters a rate limit, it will start buffering collected IPs and send a bulk report.
4. **Self-IP Protection (IPv4 & IPv6)** – The script will never report IP addresses belonging to you or your server, even if you're using a dynamic IP address.
5. **Local IP Filtering** – Local IP addresses will never be reported.
6. **Discord Webhooks Integration**:
   - Critical notifications
   - Script error alerts
   - Daily summaries of reported IPs
7. **Automatic Updates** – The script regularly fetches and applies the latest updates. You can disable this feature if you'd prefer.


## 📥 Installation (Ubuntu & Debian)

### Automatic (easy & fast & recommenced)
#### Via curl
```bash
bash <(curl -fsS https://raw.githubusercontent.com/sefinek/UFW-SpamVerify-Reporter/main/install.sh)
```

#### Via wget
```bash
bash <(wget -qO- https://raw.githubusercontent.com/sefinek/UFW-SpamVerify-Reporter/main/install.sh)
```

### Manually
#### Node.js installation
```bash
sudo apt install -y curl && \
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash - && \
sudo apt install -y nodejs
```

#### Git installation
```bash
sudo add-apt-repository -y ppa:git-core/ppa && \
sudo apt update && sudo apt install -y git
```

#### Commands
```bash
sudo apt update && sudo apt upgrade
cd ~
git clone --recurse-submodules https://github.com/sefinek/UFW-SpamVerify-Reporter.git
cd UFW-SpamVerify-Reporter
npm install
cp config.default.js config.js
sudo chmod 644 /var/log/ufw.log
npm install -g pm2
sudo mkdir -p /var/log/ufw-spamverify
sudo chown -R "$USER":"$USER" /var/log/ufw-spamverify
pm2 start .
eval "$(pm2 startup | grep sudo)"
pm2 save
```


## 🖥️ Usage
After a successful installation, the script will run continuously in the background, monitoring UFW logs and automatically reporting IP addresses.

Servers are constantly scanned by bots, usually looking for security vulnerabilities and similar weaknesses.
So don't be surprised if the number of reports sent to SpamVerify exceeds a thousand the next day.

### 🔍 Check logs
```bash
pm2 logs ufw-spamverify
```

### 📄 Example reports
```text
Blocked by UFW on homeserver1 [80/tcp]
Source port: 23639
TTL: 247
Packet length: 40
TOS: 0x00

This report was generated by:
https://github.com/sefinek/UFW-SpamVerify-Reporter
```

```text
Blocked by UFW on homeserver1 [30049/tcp]. Generated by: https://github.com/sefinek/UFW-SpamVerify-Reporter
```


## 🤝 Development
If you want to contribute to the development of this project, feel free to create a new [Pull request](https://github.com/sefinek/UFW-SpamVerify-Reporter/pulls). I will definitely appreciate it!


## 🔑 [GPL-3.0 License](LICENSE)
Copyright 2025 © by [Sefinek](https://sefinek.net). All rights reserved.